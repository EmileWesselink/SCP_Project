SPECIFICATION FOR MAP IMPLEMENTATION (FOR CLAUDE)

Implement the following changes and additional data layers in my existing interactive map.
Do not change the tech stack; just extend the current code.

1. Scale RVB building dots by energy use

Convert building markers to circle markers.

Use the building’s annual energy use field (e.g. energy_use_mwh) to:

Scale radius (e.g., 4 → 18 px).

Optionally color-scale them based on energy use.

Add a legend explaining the size (and color if used).

Keep popups as they are.

2. Add layer: Opwek energie op overheidsgrond

Create a new toggleable layer named “Opwek op Overheidsgrond”.

Use the dataset that contains government-owned energy-generation sites.

Display them as distinct markers or polygons (different color/style than buildings).

They must be switchable on/off in the layer control.

Popup: show at minimum the type of generation and capacity (if available).

3. Defence locations

Choose one of the following and implement it cleanly:

Option A: Create a separate layer “Defensie” containing all RVB buildings tagged as defence.

Option B: Keep them in the main RVB layer but give them a unique color.
Add a legend entry or toggle so users can easily identify them.

4. Add Netbeheer Nederland Capaciteitskaart (congestion + projects)

Use data provided at:
https://data.partnersinenergie.nl/capaciteitskaart/info/algemene-info/

Implement two components:

4.1 Congestion layer

Load the CSV exports (per postcode, per RNB area, or feeding-area polygons).

Join to map geometries.

Add a toggleable layer “Netcapaciteit (Congestie)”.

Visualise congestion categories using a color polygon layer (e.g., green/yellow/orange/red).

Popup fields: congestion status, available capacity, notes.

4.2 Planned grid reinforcement projects

Add another overlay “Netuitbreiding (Projecten)”.

Points or polygons showing planned projects with tooltip: name, area, expected commissioning year.

5. Add ThermoGIS geothermal potential (WMS)

Use the official ThermoGIS WMS from:
https://www.thermogis.nl/thermogis-mapviewer

Add as a semi-transparent raster overlay named “Geothermie Potentie (ThermoGIS)”.

Make toggleable.

No styling needed—just load available WMS layer (e.g. “Totale potentiële aardwarmte uit aquifers”).

Ensure projection compatibility (EPSG:28992).

6. Add PDOK Restwarmte / Industrie + CO₂ layer

Use the PDOK viewer reference:
https://app.pdok.nl/viewer/#…
 (Potentiekaart Restwarmte – ligging industrie en CO₂)

Connect to the PDOK OGC/WMS service for this layer.

Add a new toggleable layer named “Industrie + CO₂ (Restwarmte)”.

Display the industrial sites as points.

Optional: color or scale them based on CO₂ emissions or heat output if fields exist.

Popup fields: name, sector, indicative emissions, restheat potential.

7. Layer integration & projections

All layers must be toggleable in the existing layer control.

Ensure all layers use the same projection (preferably RD New EPSG:28992).

The user should be able to combine:

RVB buildings (scaled by energy use)

Opwek-overheidsgrond

Defence locations

Netcapaciteitskaart (congestion + projects)

ThermoGIS geothermal potential

Restwarmte / Industrie + CO₂

Map should remain performant with all layers loaded.

8. UI expectations

Keep the UI exactly as is but add the new layers to the layer control.

Add concise legends for:

Energy-use dot scaling

Defence symbol/color

Congestion colors

No redesign needed.